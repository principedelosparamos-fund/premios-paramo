import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.BVOCwoKb.js";import{i as x,a as f}from"./firebase.CkSkgTuA.js";import{g as h}from"./getUserRole.CSskuUxY.js";function b({message:o,type:i,onClose:r}){return t.useEffect(()=>{const n=setTimeout(()=>{r()},3e3);return()=>clearTimeout(n)},[r]),e.jsx("div",{className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg shadow-lg
      ${i==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}
      transition-opacity duration-300
    `,children:o})}function v(){const[o,i]=t.useState(""),[r,n]=t.useState(""),[d,g]=t.useState(""),[l,c]=t.useState(null);async function p(s){s.preventDefault();try{const m=(await x(f,o,r)).user;console.log("âœ… Usuario autenticado:",m.uid);const a=await h(m.uid);console.log("âœ… Rol obtenido:",a),localStorage.setItem("userRole",a),localStorage.setItem("userEmail",o),document.cookie=`userRole=${a}; path=/; SameSite=Lax; Secure`,console.log("âœ… Cookie guardada:",document.cookie),c({message:"SesiÃ³n iniciada exitosamente.",type:"success"}),setTimeout(()=>{a==="admin"?(console.log("ðŸ”µ Redirigiendo a /admin"),window.location.href="/admin"):(console.log("ðŸŸ¢ Redirigiendo a /jurado"),window.location.href="/jurado")},300)}catch(u){console.error("âŒ Error en login:",u),g("Error al iniciar sesiÃ³n. Verifica tus datos."),c({message:"Email o contraseÃ±a incorrectos.",type:"error"})}}return e.jsxs("div",{className:"container",children:[e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"py-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo"}),e.jsx("input",{type:"email",placeholder:"Correo electrÃ³nico",value:o,onChange:s=>i(s.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ContraseÃ±a"}),e.jsx("input",{type:"password",placeholder:"ContraseÃ±a",value:r,onChange:s=>n(s.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all"})]}),d&&e.jsx("div",{className:"text-red-500",children:d}),e.jsx("div",{className:"py-3",children:e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 rounded-lg transition-colors",children:"Iniciar SesiÃ³n"})})]}),l&&e.jsx(b,{message:l.message,type:l.type,onClose:()=>c(null)})]})}export{v as default};
